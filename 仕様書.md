# コンサルティング統合支援アプリ 完全仕様書

## 1. 本アプリの本質的目的（最重要）

### ゴール
「あらゆるクライアントの多様な悩みに対して、最短で“整理・判断・次の一手”を出せること」

### 設計思想
*   特定用途（事業計画書／アプリ開発／SNS／販売戦略 等）はすべて**“モジュール（手段）”**であり、目的ではない。
*   大手コンサルが暗黙的に行っているプロセスをUXとして再現：
    *   課題の整理
    *   ゴールの特定
    *   適切な分析の選択
    *   アウトプット生成

---

## 2. 利用前提（初期条件）

### 利用者
*   フェーズ1：自分専用（開発者/コンサルタント本人）
*   フェーズ2：クライアント利用も想定可能な柔軟な構造

### 想定クライアント（混在前提）
*   新規事業開発 / 既存事業の売上不振 / 商品はあるが売れない
*   販売戦略・方針転換に悩んでいる
*   SNS／記事／発信内容に悩んでいる
*   経理・業務効率に課題
*   事業計画書を作りたい（融資・補助金・資金調達）
*   アプリを作りたい / 仕様書だけ作りたい
*   上記に当てはまらない複雑案件

---

## 3. 全体構造（思想）

*   **「全部の機能を持つ」**が**「最初の選択で使うものだけを絞る」**。
*   選択肢にない場合は**「自由入力」**。
*   **AIによる“取捨選択”が中核**：AIが内容を読み取り、最適なモジュール構成を決定する。

---

## 4. 画面設計（トップ画面：最重要UI）

### Step 0：開始画面
*   「このアプリで何をしたいですか？」という問いかけ。

### Step 1：ゴール選択（必須・複数選択可）
*   売上を改善したい
*   販売戦略／新しい方針を考えたい
*   事業計画を整理したい
*   資金調達・融資を考えたい
*   商品・サービスの方向性を見直したい
*   SNS／記事／発信内容を作りたい
*   業務効率・経理を改善したい
*   アプリを作りたい
*   仕様書を作りたい
*   まだ整理できていない

### Step 2：対象の性質（任意）
*   個人 / 法人 / スタートアップ / 既存事業 / 知人・紹介案件 / その他

### Step 3：自由入力欄（最重要）
*   選択肢にない内容、複雑な背景、クライアントの生の相談内容。
*   **ここをAIが全文解析し、以降のモジュールを自動決定する。**

---

## 5. AIの役割（超重要）

AIは単なるテキスト生成ではなく、以下の**オーケストレーター**として機能する。
*   ゴールの再定義と課題の構造化
*   必要な分析レベルの判断（SWOT/PESTなどを「出す or 出さない」を判断）
*   必要なモジュールのみを起動
*   出力形式をゴールに合わせて最適化
*   **「全部出すAI」は禁止。目的駆動で取捨選択を行う。**

---

## 6. 搭載モジュール（正規名・呼び出しキー）

### 6-0. 基本構造（共通）
*   **M00 構造化**: 課題/ゴール/前提/制約の整理。すべての案件の起点。 **[実装済]**

### 6-1. 分析・探索系
*   **M10 探索**: PEST/SWOT/3C等の適用判断を含む広範な探索（ゴール不明確時）。 **[実装済]**
*   **M11 市場/競合/ターゲット**: 3C簡易分析、競合ベンチ、ペルソナ作成。（M10/M20内に統合実装） **[実装済]**
*   **M12 トレンド/キーワード**: 記事・SNS向けのトレンド解析。トレンドワード・ボリューム・成長率を可視化。 **[実装済]**

### 6-2. 戦略・計画系
*   **M20 販売戦略・方針転換**: 売上不振の処方箋、価格/導線/訴求の切り分け。 **[実装済]**
*   **M30 事業計画書**: 公的/金融向けテンプレ生成。文章＋数値連動。 **[実装済]**
*   **M31 資金調達**: 融資/補助金/制度整理、必要項目の整形。（M30内に統合実装） **[実装済]**

### 6-3. 実行支援・改善系
*   **M40 業務改善/経理**: 業務棚卸し、改善優先度、効率化ツール活用仮説。 **[実装済]**
*   **M50 SNS/記事/発信**: 目的別投稿案、構成案、運用カレンダー。 **[実装済]**

### 6-4. 開発・設計系
*   **M60 アプリ開発**: 目的/ユーザー像/機能要件/プロトタイプ方針。 **[実装済] (専用UI)**
*   **M61 仕様書作成**: 要件定義/機能一覧/画面構成/出力形式整備。（M60内に統合実装） **[実装済]**

### 6-5. 共通・基盤機能（自動実行・管理）
*   **M90 出力オーケストレーター**: PDF/Word/MD/Sheet生成。 **[実装済] (PDF/MD)**
*   **M91 スプレッドシート式生成**: 数値シミュレーション用の計算式セット生成。（M30 PLシミュレーションで一部対応）
*   **M92 履歴管理**: 保存/閲覧/削除/再編集の管理。 **[実装済]**

---

## 7. 出力形式（全対応）

用途に応じて複数同時生成可能：
1.  **ダッシュボード表示**（Web上での閲覧） **[実装済]**
2.  **PDF / Word**（提出用資料） **[実装済] (PDF)**
3.  **Markdown**（Obsidian等のナレッジ管理ツール想定） **[実装済]**
4.  **スプレッドシート**（計算式入り・再編集用）

---

## 8. スプレッドシート仕様（重要）

*   数値は「結果」ではなく**「計算式」**で出力する。
*   売上計算式、原価率、利益推移など。
*   **「1つの数値や2つの前提を変えるだけで、全体が自動変動する」**シミュレーション可能な構造。（編集モードにより数値変更→保存のサイクルを実現）

---

## 9. 履歴管理機能（必須）

*   入力内容・出力結果の保存 **[実装済]**
*   履歴一覧表示・削除 **[実装済]**
*   過去案件の呼び出し、再編集機能 **[実装済]**

---

## 10. 将来拡張前提設計

*   新しい解析モジュールの容易な追加
*   新しい出力形式の追加
*   クライアントへのアカウント発行・提供への転用

---

## 11. この仕様書の位置付け

大手コンサルの「頭の中でやっていること」をUXとAIで再現した、コンサルティングプロセスの自動化・高度化のための設計書である。

---

## 12. モジュール呼び出しロジック（思考コア）

### 12-1. ロジック全体像
呼び出しは以下の3層で決定し、「出し過ぎ」を抑制する。
*   **Layer A：明示ゴール**: ボタン選択から強制起動候補を生成。
*   **Layer B：自由入力**: テキストから潜在的な必要モジュールを抽出。
*   **Layer C：抑制・最適化**: 上限（標準3〜5）を適用し、最終セットを確定。

### 12-2. 呼び出し決定ルール

#### A. 必ず起動するもの
*   **M00 構造化**: 曖昧さを排除するため、例外なく全案件の起点とする。

#### B. ゴールボタンによる強制起動
| ユーザー選択 | 強制起動候補 | 追加候補（条件付き） | 抑制ルール |
| :--- | :--- | :--- | :--- |
| 売上を改善したい | M20 | M11 | M10は原則OFF |
| 販売戦略/方針見直し | M20 | M11 | M30は自動起動しない |
| 事業計画を整理したい | M30 | M31, M91 | M10は原則OFF |
| 資金調達/融資 | M31 | M30 | M20は売上課題明記まで抑制 |
| 商品/サービス方向性 | M11 | M10, M20 | M50は発信目的が出るまで抑制 |
| SNS/記事/発信 | M50 | M12 | M10は原則OFF |
| 業務効率/経理 | M40 | M91 | M20は売上課題明記まで抑制 |
| アプリを作りたい | M60 | M61 | M10は原則OFF |
| 仕様書を作りたい | M61 | M60 | M10は原則OFF |
| まだ整理できていない | M10 | ALL (AI判断) | 抑制なし（探索モード） |

#### C. 自由入力によるシグナル抽出（キーワード・意図）
*   「売上が落ちた/集客」 → **M20**
*   「客層/競合/市場」 → **M11**
*   「補助金/公庫/公的提出」 → **M31 (+ M30)**
*   「経理が回らない/事務重い」 → **M40**
*   「インスタ/X/何を書く」 → **M50 (+ M12)**
*   「アプリ/要件/画面」 → **M60 (+ M61)**
*   「数字/シミュレーション」 → **M91**

### 12-3. 取捨選択アルゴリズム（全部出し禁止）
1.  **スコアリング**: ボタン一致（+5）、強キーワード（+4）、ClientType相性等を合算。
2.  **優先順位**: 期限が近いもの、アウトプットが明確なものを優先。
3.  **抑制抑制**: M10（探索）はゴール明確なら原則OFF。M91（計算式）は具体的要求時のみ。

---

## 13. 画面遷移図（全体構造）

### 0. スタート画面（Entry）
*   **目的**: アプリの思想を1画面で理解させ、「整理 → 判断 → 次の一手」に導く。
*   **表示要素**: アプリ名、簡易説明文、［開始する］ボタン
*   **遷移**: → ① ゴール選択画面

### 1. ゴール選択画面（最重要）
*   **役割**: すべての分岐点。
*   **表示**: 「今、何を解決したいですか？」
*   **選択肢**: 売上改善、販売戦略、事業計画、資金調達、商品方向性、SNS/記事作成、業務効率改善、アプリ開発、仕様書作成、未知の課題（整理できていない）
*   **遷移**: → ② クライアント性質選択

### 2. クライアント性質選択（補助）
*   **目的**: 分析粒度とトーン調整用（スキップ可能）。
*   **選択肢**: 個人 / 法人 / スタートアップ / 既存事業 / 知人・紹介案件 / その他
*   **遷移**: → ③ 自由入力画面

### 3. 自由入力画面（AI判断の核心）
*   **役割**: 大手コンサルのヒアリングの再現。背景や悩みを自由に記述。
*   **表示**: 「背景や悩みを自由に書いてください」
*   **機能**: 制限なしテキスト、箇条書き/文章対応。
*   **遷移**: → ④ AI解析・判断画面

### 4. AI解析・判断画面（プロセス可視化）
*   **役割**: AIの思考プロセスを可視化し、信頼性を高める。
*   **表示内容**: 検出されたゴール、課題構造サマリ、起動モジュール一覧、除外された分析の理由。
*   **操作**: ［この構成で進める］［修正する］
*   **遷移**: → ⑤ モジュール実行ダッシュボード

### 5. モジュール実行ダッシュボード（中核）
*   **役割**: 案件ごとの「作業基地」。
*   **実行順序**:
    *   F1：M00 構造化（起点）
    *   F2：モジュール選定（スコアリング）
    *   F3：選ばれたモジュールを順次実行
    *   F4：M90 出力オーケストレーター
    *   F5：M92 履歴保存
*   **レイアウト**:
    *   **左カラム**: 起動中モジュール一覧（販売戦略、事業計画、SNS等）
    *   **中央**: 現在の出力結果、AIの提案、構造化データ
    *   **下部 (ワイド)**: AIアドバイザー（戦略カウンセリング）。分析コンテキストと連動。
    *   **右カラム / セクション末尾**: 前提条件、数値設定、編集ポイント、モジュール追加、NextStepBox（次の一手）
*   **遷移**: → ⑥ 出力形式選択画面

### 6. 出力形式選択画面
*   **操作**: 複数同時選択可能。
*   **選択肢**: ダッシュボード表示、PDF、Word、Markdown、スプレッドシート（計算式入り）
*   **遷移**: → ⑦ 出力結果画面

### 7. 出力結果画面
*   **役割**: 成果物の最終確認。
*   **表示**: 各形式のプレビュー、ダウンロードリンク、Markdown（Obsidian用）
*   **操作**: ［数値を修正する］［別パターンを作る］［保存する］
*   **遷移**: → ⑧ 履歴管理

### 8. 履歴管理画面
*   **役割**: コンサル資産（ナレッジ）の蓄積。
*   **表示**: 日時、案件名、使用モジュール、出力形式の一覧。
*   **操作**: 閲覧、再編集、削除。

---

## 画面遷移まとめ（フロー）
**開始** → **ゴール選択** → **クライアント性質** → **自由入力** → **AI解析・判断** → **モジュール実行（ダッシュボード）** → **出力形式選択** → **出力** → **履歴保存**
 
 ---

## 14. 最新実装状況 (2025/12/24時点)

### UI/UXの進化
当初の仕様に加え、デザイナー（Core9）の監修により以下のUX強化が行われている。
*   **日本語ファースト**: 日本のユーザーに最適化された完全に日本語化されたインターフェース。
*   **AIアドバイザー（常駐・統合型）**: フローティングドロワーから、分析エリア下部のワイドセクションへ進化。常時コンテキストを共有し、ブラッシュアップを支援。
*   **視覚的フィードバック（バリデーション）**: M00が未完了の状態で詳細生成を試みた際、サイドバーのM00モジュールが点滅して入力を促すUXを実装。
*   **インタラクティブ・シミュレーション**: M30（事業計画）において、スライダー操作で即座にPL（損益計算書）の推移が変動する動的UIを実装。
*   **レスポンシブ対応**: PC/タブレット/スマートフォンでシームレスに利用可能。

### 技術スタック
*   **Frontend**: Next.js 14 (App Router), React, Tailwind CSS, Framer Motion
*   **AI Engine**: Google Gemini 2.0 Flash (Experimental)
*   **Deployment**: Vercel (Server Actions対応)


